We will use FlareVM machine in order to detonate the malware and REMnux for different other purpouses.

For example it will be a Internet Simulator.

This is useful when the malware uses internet to do some activities. In this case REMnux will reply to the requests of the malware.

So our REMnux is a `Network analysis Platform`

FlareVM will give us the possibility to study the `Host Based Indicators` and REMnux the `Network Based Indicators` of the malwares.
- ![[Pasted image 20250204114739.png]]

# Setup the simulator

First of all we need to change the `.conf` file:
```bash 
sudo nano /etc/inetsim/inetsim.conf
```

And remove the # before `start_service dns`:
- ![[Pasted image 20250204114953.png]]

Then we need to change the `service_bind_address` to `0.0.0.0`:
- ![[Pasted image 20250204115033.png]]
- this will bind all the interfaces of the host

Then we need to change the `dns_default_ip` to the current REMnux ip address:
- ![[Pasted image 20250204115156.png]]

And we save the changes.
# start the simulator
To start it we just need to run:
```bash
inetsim
```
- ![[Pasted image 20250204142713.png]]


To test it on the FlareVM machine we can fo on the browser and visit the REMux `ip`:
- ![[Pasted image 20250204143202.png]]



# downloading malz.exe
On the REMux page we can visit `/anything.exe` and download a malware.

This is useful if a malware downloads anything from internet, so we can serve these `.exe` files.


# Changing FlareVM dns address

Now we need to change the `dns` address of the Flare VM machine. So we go on `View Network connections` -> `Ethernet` -> `Properties` -> `Internet Protocol v4` -> and change the `dns server address` with the ip of REMux:
- ![[Pasted image 20250204150757.png]]

At this point each request is redirected to the http page seved by our REMux:
- ![[Pasted image 20250204150939.png]]

